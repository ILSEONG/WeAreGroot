<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="kr.co.moran.web.member">
  	<insert id="insertMember" parameterType="kr.co.moran.web.vo.MemberVO">
  		INSERT INTO member (
	      m_email,
	      m_pw,
	      m_name,
	      m_img,
	      m_nick,
	      m_phone,
	      m_regdate,
	      m_login_type,
	      m_role,
	      m_del_status,
	      m_keep_period
	    ) VALUES (
	      #{mEmail},
	      #{mPw},
	      #{mName},
	      #{mImg},
	      #{mNick},
	      #{mPhone},
	      NOW(),
	      #{mLoginType},
	      #{mRole},
	      #{mDelStatus},
	      #{mKeepPeriod}
	    )
  	</insert>
  	<insert id="insertAddress" parameterType="kr.co.moran.web.vo.AddressVO">
  		INSERT INTO address (
  			m_id,
  			a_zipcode,
  			a_addr1,
  			a_addr2
  		) VALUES (
  			#{mId},
  			#{aZipcode},
  			#{aAddr1},
  			#{aAddr2}
  		)
  	</insert>
  	<select id="selectMemberByEmailAndPassword" parameterType="map" resultType="kr.co.moran.web.vo.MemberVO">
  		SELECT 
		    m_id AS mId,
		    m_email AS mEmail,
		    m_pw AS mPw,
		    m_name AS mName,
		    m_img AS mImg,
		    m_nick AS mNick,
		    m_phone AS mPhone,
		    m_regdate AS mRegdate,
		    m_loginType AS loginType,
		    m_role AS mRole,
		    m_delStatus AS mDelStatus,
		    m_keepPeriod AS mKeepPeriod
		FROM
			member
		WHERE
			m_email = #{mEmail} AND m_pw = #{mPw}
  	</select>
  </mapper>