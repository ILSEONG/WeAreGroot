<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="kr.co.moran.web.member">
  	<insert id="insertMember" parameterType="kr.co.moran.web.vo.member.MemberVO">
  		INSERT INTO MEMBER (
	      m_email,
	      m_pw,
	      m_name,
	      m_profile_img,
	      m_nick,
	      m_phone,
	      m_regdate,
	      m_logtype,
	      m_admintype,
	      m_is_maintain,
	      m_retention_period,
	      m_birth
	    ) VALUES (
	      #{mEmail},
	      #{mPw},
	      #{mName},
	      #{mProfileImg},
	      #{mNick},
	      #{mPhone},
	      NOW(),
	      0,
	      #{mAdmintype},
	      #{mIsMaintain},
	      #{mRetentionPeriod},
	      DATE_FORMAT(#{mBirth}, '%Y-%m-%d')
	    )
  	</insert>
  	<insert id="insertAddress" parameterType="kr.co.moran.web.vo.member.AddressVO">
  		INSERT INTO ADDRESS (
  			m_id,
  			a_zipcode,
  			a_addr1,
  			a_addr2
  		) VALUES (
  			#{mId},
  			#{aZipcode},
  			#{aAddr1},
  			#{aAddr2}
  		)
  	</insert>
  	<select id="selectMemberByEmailAndPassword" parameterType="map" resultType="kr.co.moran.web.vo.member.MemberVO">
  		SELECT 
		    m_id AS mId,
		    m_email AS mEmail,
		    m_pw AS mPw,
		    m_name AS mName,
		    m_profile_img AS mProfileImg,
		    m_nick AS mNick,
		    m_phone AS mPhone,
		    m_regdate AS mRegdate,
		    m_logtype AS mLogtype,
		    m_admintype AS mAdmintype,
		    m_is_maintain AS mIsMaintain,
		    m_retention_period AS mRetentionPeriod
		FROM
			MEMBER
		WHERE
			m_email = #{mEmail} AND m_pw = #{mPw}
  	</select>
  </mapper>